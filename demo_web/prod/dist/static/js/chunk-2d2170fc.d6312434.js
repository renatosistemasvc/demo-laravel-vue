(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2170fc"],{c4b7:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main"},[o("c-panel",[o("form-cep",{attrs:{paramId:e.$route.params.id},on:{onSubmitCep:e.onSubmitCep}})],1)],1)},i=[],r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.editCep&&!e.dados.id,expression:"editCep && !dados.id"}],ref:"dados",staticStyle:{"min-height":"130px"},attrs:{model:e.dados,"label-position":"top"},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmitCep(t)}}},[!e.editCep||e.dados.id?o("div",[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{xs:24,sm:4,md:4}},[o("el-form-item",{key:"situacao",attrs:{label:"Situação",prop:"situacao",rules:[e.$requiredChange]}},[o("el-select",{model:{value:e.dados.situacao,callback:function(t){e.$set(e.dados,"situacao",t)},expression:"dados.situacao"}},[o("el-option",{key:!0,attrs:{label:"ATIVO",value:!0}}),o("el-option",{key:!1,attrs:{label:"INATIVO",value:!1}})],1)],1)],1),o("el-col",{attrs:{xs:24,sm:20,md:20}},[o("el-form-item",{key:"cep",attrs:{label:"Cep",prop:"cep",rules:[e.$requiredBlur]}},[o("el-input",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],attrs:{maxlength:"191"},on:{blur:function(t){return e.formatData("cep",9)}},model:{value:e.dados.cep,callback:function(t){e.$set(e.dados,"cep",t)},expression:"dados.cep"}})],1)],1)],1),o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{xs:24,sm:24,md:24}},[o("el-form-item",{key:"logradouro_id",attrs:{label:"Logradouro",prop:"logradouro_id",rules:[e.$requiredChange]}},[o("el-select",{attrs:{placeholder:"pesquisar...",filterable:"",remote:"","remote-method":e.getLogradouroByFilter,loading:e.loadingLogradouro},model:{value:e.dados.logradouro_id,callback:function(t){e.$set(e.dados,"logradouro_id",t)},expression:"dados.logradouro_id"}},e._l(e.logradouros,(function(e){return o("el-option",{key:e.id,attrs:{label:e.nome,value:e.id}})})),1)],1)],1)],1),o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{xs:24,sm:24,md:24}},[o("el-form-item",{key:"bairro_id",attrs:{label:"Bairro",prop:"bairro_id",rules:[e.$requiredChange]}},[o("el-select",{attrs:{placeholder:"pesquisar...",filterable:"",remote:"","remote-method":e.getBairroByFilter,loading:e.loadingBairro},model:{value:e.dados.bairro_id,callback:function(t){e.$set(e.dados,"bairro_id",t)},expression:"dados.bairro_id"}},e._l(e.bairros,(function(e){return o("el-option",{key:e.id,attrs:{label:e.nome,value:e.id}})})),1)],1)],1)],1),o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{xs:24,sm:24,md:24}},[o("el-form-item",{key:"cidade_id",attrs:{label:"Cidade / Estado",prop:"cidade_id",rules:[e.$requiredChange]}},[o("el-select",{attrs:{placeholder:"pesquisar...",filterable:"",remote:"","remote-method":e.getCidadeByFilter,loading:e.loadingCidade},model:{value:e.dados.cidade_id,callback:function(t){e.$set(e.dados,"cidade_id",t)},expression:"dados.cidade_id"}},e._l(e.cidades,(function(e){return o("el-option",{key:e.id,attrs:{label:e.nome,value:e.id}})})),1)],1)],1)],1),o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{xs:24}},[o("el-form-item",{staticClass:"u-text-right u-mt-15"},[o("el-button",{attrs:{type:"primary",id:"btn-cep","native-type":"submit"}},[e._v("SALVAR")])],1)],1)],1)],1):e._e()])],1)},s=[],d={props:["paramId"],data:function(){return{loadingLogradouro:!1,logradouros:[],loadingBairro:!1,bairros:[],loadingCidade:!1,cidades:[],editCep:!1,alert:!1,dados:{id:"",situacao:"",cep:""}}},mounted:function(){},methods:{getLogradouroByFilter:function(e){var t=this;this.$axios.post("".concat(this.$store.state.config.baseUrlApi,"/api/logradouro/searchByNome"),{query:e},this.$store.getters.getHeaderAuth).then((function(e){t.logradouros=JSON.parse(JSON.stringify(e.data))})).catch((function(e){t.$store.commit("throwException",e)}))},getBairroByFilter:function(e){var t=this;this.$axios.post("".concat(this.$store.state.config.baseUrlApi,"/api/bairro/searchByNome"),{query:e},this.$store.getters.getHeaderAuth).then((function(e){t.bairros=JSON.parse(JSON.stringify(e.data))})).catch((function(e){t.$store.commit("throwException",e)}))},getCidadeByFilter:function(e){var t=this;this.$axios.post("".concat(this.$store.state.config.baseUrlApi,"/api/cidade/searchByNome"),{query:e},this.$store.getters.getHeaderAuth).then((function(e){t.cidades=JSON.parse(JSON.stringify(e.data))})).catch((function(e){t.$store.commit("throwException",e)}))},getCepById:function(e){var t=this;this.$axios.get("".concat(this.$store.state.config.baseUrlApi,"/api/cep/getById/")+e,this.$store.getters.getHeaderAuth).then((function(e){t.dados=JSON.parse(JSON.stringify(e.data)),t.dados.logradouro&&t.logradouros.push({id:t.dados.logradouro.id,nome:t.dados.logradouro.nome}),t.dados.bairro&&t.bairros.push({id:t.dados.bairro.id,nome:t.dados.bairro.nome}),t.dados.cidade&&t.cidades.push({id:t.dados.cidade.id,nome:t.dados.cidade.nome+" - "+t.dados.cidade.estado.nome})})).catch((function(e){t.$store.commit("throwException",e)}))},onSubmitCep:function(){var e=this;document.getElementById("btn-cep").focus(),this.$refs.dados.validate((function(t){t?(window.eventBus.$emit("loading",!0),e.editCep?e.$axios.post("".concat(e.$store.state.config.baseUrlApi,"/api/cep/update/")+e.dados.id,e.dados,e.$store.getters.getHeaderAuth).then((function(t){window.eventBus.$emit("loading",!1),window.eventBus.$emit("alert",{msg:"Sucesso! - Operação realizada com Sucesso!",type:"success"}),e.$emit("onSubmitCep")})).catch((function(t){window.eventBus.$emit("loading",!1),e.$store.commit("throwException",t)})):e.$axios.post("".concat(e.$store.state.config.baseUrlApi,"/api/cep/store"),e.dados,e.$store.getters.getHeaderAuth).then((function(t){window.eventBus.$emit("loading",!1),window.eventBus.$emit("alert",{msg:"Sucesso! - Operação realizada com Sucesso!",type:"success"}),e.$emit("onSubmitCep")})).catch((function(t){window.eventBus.$emit("loading",!1),e.$store.commit("throwException",t)}))):window.eventBus.$emit("alert",{msg:"Campos obrigatórios não foram preenchidos.",type:"warning"})}))},resetFormCep:function(){this.dados={id:"",nome:"",descricao:"",ativa:"",emDestaque:null,imagem:""},this.$refs.dados.clearValidate()},formatData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.dados[e])return!1;t&&this.dados[e].length<t&&(this.dados[e]=""),this.dados[e]=this.dados[e].toUpperCase()}},watch:{paramId:{immediate:!0,handler:function(e){e&&(this.getCepById(e),this.editCep=!0)}}}},n=d,l=o("2877"),c=Object(l["a"])(n,r,s,!1,null,null,null),u=c.exports,m={methods:{onSubmitCep:function(){this.$router.push("/admin/endereco/4")}},components:{formCep:u}},p=m,g=Object(l["a"])(p,a,i,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d2170fc.d6312434.js.map